version: '3'

services:
  webApp:
    image: 128261723812/odds-web-backend
    hostname: webapp
    ports:
      - 8080:8080

  selenium_env:
    image: selenium/standalone-firefox:112.0
    hostname: selenium_env
    depends_on:
      - webApp

  data_source:
    image: 128261723812/oddsproducer:2
    environment: 
      - driver_server=selenium_env:4444
      - consumer_server=http://webApp:8123/data
    depends_on:
      - selenium_env
      - webApp
    volumes:
      - ${USER}:/app/data
    restart: on-failure
